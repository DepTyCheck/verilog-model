stage: syntesis
issue_status: reported
issue_link: https://github.com/steveicarus/iverilog/issues/1231
tool: iverilog
id: failed_assertion_prts_unpacked_dimensions
title: failed assertion prts[0]->unpacked_dimensions()==0
regex: >
  elaborate\.cc:\d+: failed assertion prts\[0\]->unpacked_dimensions\(\)==0
examples:
  - failed_assertion_prts_unpacked_dimensions_1661:
      first_found: 03.04.2025
      minified_example: |
        module a(input wire i1 [1:2]);
          assign i1 = '{'b1, 'b0};
        endmodule: a

        module b();
          wire w [1:2];
          a a_inst(.i1(w));
        endmodule: b
      full_example: |
        // Seed: 13507575981681771882,5635924639322085807

        module upyu
          (output int uytlurz [3:1], output logic [4:3] lgvmh, input wire vhdvpydcie [4:4][1:3], input logic [1:2][4:4] xjkoy);
          
          // Top inputs -> top outputs assigns
          assign lgvmh = xjkoy;
          
          // Assigns
          assign uytlurz = '{'b1,'b1,'b1};
          assign vhdvpydcie = '{'{'b0,'b1,'b1}};
          assign vhdvpydcie = '{'{'b1,'b0,'b1}};
        endmodule: upyu

        module fhqyox
          (input real nr);
          
          wire vzcsefbn [4:4][1:3];
          int qyqz [3:1];
          
          xor rylnlneqxm(llqsuzqnq, qcxdwwe, lonwvju);
          upyu cvsilbyhs(.uytlurz(qyqz), .lgvmh(qcxdwwe), .vhdvpydcie(vzcsefbn), .xjkoy(qcxdwwe));
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign lonwvju = 'b1;
          assign vzcsefbn = '{'{'b0,'b0,'b0}};
          assign lonwvju = 'b1;
          assign qcxdwwe = 'b1z;
          assign llqsuzqnq = 'b0;
          assign qcxdwwe = 'b0x;
        endmodule: fhqyox

        module ma
          (output bit [3:2][2:1] rqqji, output bit r, input logic [0:3] ngc, input logic [1:4][2:2][3:4] tb);
          
          nand h(rqqji, xguwdoevz, rqqji);
          
          // Top inputs -> top outputs assigns
          assign r = tb;
          
          // Assigns
          assign xguwdoevz = 'b0;
          assign xguwdoevz = 'b0;
          assign xguwdoevz = 'bx;
          assign xguwdoevz = 'b1;
          assign xguwdoevz = 'b0;
        endmodule: ma

        module keaisgaadl
          ( output logic [1:3] lonrroiv [4:4]
          , output logic [4:4][3:2][0:4] mac
          , output bit [2:1][4:3][4:3] mcc
          , input wire e
          , input bit [2:3] zhseg [4:2]
          , input logic [4:0] fivlwpb [1:4]
          );
          
          fhqyox dwmnculns(.nr(e));
          
          // Top inputs -> top outputs assigns
          assign mac = e;
          
          // Assigns
          assign e = 'b1;
          assign e = 'b1;
          assign e = 'b1;
          assign e = 'b1;
        endmodule: keaisgaadl

        // Seed after: 10065404187654998384,5635924639322085807
  - failed_assertion_prts_unpacked_dimensions_1666:
      first_found: 02.07.2025
      full_error: |
        assert: elaborate.cc:1666: failed assertion prts[0]->unpacked_dimensions()==0
      full_example: |
        // Seed: 11308047302319177250,15556259958226977675

        module uxxuthb
          (input wire zeigtvdbp [3:0], input bit [4:1] wdlbfljcj, input bit [0:1][4:2][4:4] xqsdv);
          
          xor liwlhle(prawo, yopczqr, yopczqr);
          
          not cvurtmdnh(w, xqsdv);
          // warning: implicit conversion of port connection truncates from 6 to 1 bits
          // warning: implicit conversion changes possible bit states from 2-state to 4-state
          //   bit [0:1][4:2][4:4] xqsdv -> logic xqsdv
          
          or tejh(ltfxyj, yopczqr, ltfxyj);
          
          or q(yopczqr, qjragd, xpyoh);
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign xpyoh = 'b1;
          assign xpyoh = 'bz;
          assign qjragd = 'b1;
          assign xpyoh = 'bz;
          assign zeigtvdbp = '{'b1,'b1,'b0,'b0};
        endmodule: uxxuthb

        module knwovmp
          ( output real vgb
          , output bit mlsxlttpca [3:0]
          , output bit [4:1][0:4] ec
          , input bit [2:3] zgqxowuzjj [1:3]
          , input logic [4:0] dvv [1:4]
          );
          
          wire k [3:0];
          
          uxxuthb qyhkd(.zeigtvdbp(k), .wdlbfljcj(awdswmvyno), .xqsdv(r));
          // warning: implicit conversion of port connection expands from 1 to 4 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   wire awdswmvyno -> bit [4:1] wdlbfljcj
          //
          // warning: implicit conversion of port connection expands from 1 to 6 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   wire r -> bit [0:1][4:2][4:4] xqsdv
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign vgb = 'b1;
          assign ec = 'b11010010011001000111;
          assign mlsxlttpca = '{'b1,'b1,'b0,'b0};
        endmodule: knwovmp

        module fgbha
          (output logic [1:0][4:3] htwzzr, output int lyvyxabqmd [1:2][2:2], output bit [0:2][3:4][2:1] es, input bit [4:0][0:0] fnxrhonkd);
          
          
          and f(es, htwzzr, fib);
          // warning: implicit conversion of port connection expands from 1 to 12 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   logic es -> bit [0:2][3:4][2:1] es
          //
          // warning: implicit conversion of port connection truncates from 4 to 1 bits
          //   logic [1:0][4:3] htwzzr -> logic htwzzr
          
          xor ruuujmad(ob, htwzzr, whyte);
          // warning: implicit conversion of port connection truncates from 4 to 1 bits
          //   logic [1:0][4:3] htwzzr -> logic htwzzr
          
          nand vjzacqoige(htwzzr, htwzzr, wbbdrrnq);
          // warning: implicit conversion of port connection expands from 1 to 4 bits
          //   logic htwzzr -> logic [1:0][4:3] htwzzr
          //
          // warning: implicit conversion of port connection truncates from 4 to 1 bits
          //   logic [1:0][4:3] htwzzr -> logic htwzzr
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign fib = 'b0;
          assign wbbdrrnq = 'b1;
          assign wbbdrrnq = 'b0;
          assign whyte = 'b0;
          assign lyvyxabqmd = '{'{'bz},'{'b1}};
          assign ob = 'bx;
        endmodule: fgbha

        module ntsh
          ( output int iprnthqe [1:1]
          , input logic [1:1][0:3] iuiykjllvi
          , input logic [2:1] bvy
          , input logic [1:3][1:1] oigcryjunp
          , input logic [3:0] qfmhvgz [0:2]
          );
          
          wire ypyeugtc [3:0];
          
          not lywnhbhus(xexbl, oeqxdw);
          
          not kwfnv(mazndohkpz, kbnnnjnf);
          
          and zq(tvrtbipgc, mazndohkpz, qhgiwirgp);
          
          uxxuthb nytgb(.zeigtvdbp(ypyeugtc), .wdlbfljcj(oigcryjunp), .xqsdv(mazndohkpz));
          // warning: implicit conversion of port connection expands from 3 to 4 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   logic [1:3][1:1] oigcryjunp -> bit [4:1] wdlbfljcj
          //
          // warning: implicit conversion of port connection expands from 1 to 6 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   wire mazndohkpz -> bit [0:1][4:2][4:4] xqsdv
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign ypyeugtc = '{'b0,'b1,'b0,'b1};
          assign qhgiwirgp = 'bx;
          assign ypyeugtc = '{'b0,'b0,'b0,'b0};
          assign kbnnnjnf = 'b0;
          assign iprnthqe = '{'b0};
          assign mazndohkpz = 'b0;
          assign tvrtbipgc = 'b1;
          assign mazndohkpz = 'bz;
        endmodule: ntsh

        // Seed after: 9722071735199696192,15556259958226977675
  
  - failed_assertion_prts_unpacked_dimensions_1662:
      first_found: 01.07.2025
      full_error: |
        assert: elaborate.cc:1662: failed assertion prts[0]->unpacked_dimensions()==0
      full_example: |
        // Seed: 13965131667319788158,14865787408525461641

        module nh
          (output bit [4:2] socv, input integer hruyko [3:2], input logic [0:3][1:3][4:1] hguwg, input wire vyjh [0:3][2:0]);
          
          
          not jabsepvph(jjivwpnzr, kpfl);
          
          and zax(lumokkrv, socv, socv);
          // warning: implicit conversion of port connection truncates from 3 to 1 bits
          // warning: implicit conversion changes possible bit states from 2-state to 4-state
          //   bit [4:2] socv -> logic socv
          //
          // warning: implicit conversion of port connection truncates from 3 to 1 bits
          // warning: implicit conversion changes possible bit states from 2-state to 4-state
          //   bit [4:2] socv -> logic socv
          
          not ttq(socv, socv);
          // warning: implicit conversion of port connection expands from 1 to 3 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   logic socv -> bit [4:2] socv
          //
          // warning: implicit conversion of port connection truncates from 3 to 1 bits
          // warning: implicit conversion changes possible bit states from 2-state to 4-state
          //   bit [4:2] socv -> logic socv
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign kpfl = 'bz;
          assign lumokkrv = 'b1;
          assign vyjh = '{'{'b1,'b0,'b1},'{'b0,'b1,'b1},'{'b1,'b1,'b1},'{'b0,'b1,'b0}};
        endmodule: nh

        module jvrbtyy
          (input uwire p [0:2][1:4], input integer mvuekky [2:1][1:4], input logic [4:1] bklnx);
          
          integer ljztmasvs [3:2];
          wire bxqdrhkv [0:3][2:0];
          integer xhlv [3:2];
          wire a [0:3][2:0];
          
          nh kacbezspy(.socv(su), .hruyko(ljztmasvs), .hguwg(xa), .vyjh(bxqdrhkv));
          // warning: implicit conversion of port connection truncates from 3 to 1 bits
          // warning: implicit conversion changes possible bit states from 2-state to 4-state
          //   bit [4:2] socv -> wire su
          //
          // warning: implicit conversion of port connection expands from 1 to 48 bits
          //   wire xa -> logic [0:3][1:3][4:1] hguwg
          
          nh valll(.socv(xa), .hruyko(xhlv), .hguwg(yjnlfkl), .vyjh(a));
          // warning: implicit conversion of port connection truncates from 3 to 1 bits
          // warning: implicit conversion changes possible bit states from 2-state to 4-state
          //   bit [4:2] socv -> wire xa
          //
          // warning: implicit conversion of port connection expands from 1 to 48 bits
          //   wire yjnlfkl -> logic [0:3][1:3][4:1] hguwg
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign xhlv = '{'b0,'b0};
          assign ljztmasvs = '{'b0,'b1};
        endmodule: jvrbtyy

        module xen
          (output uwire ffokjy [4:0], output logic [0:0][2:4] qtjgxxnhd, input bit [4:3] ykjtxamk, input logic mcobdgrcf [1:4]);
          
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign ffokjy = '{'b1,'b0,'b0,'b0,'b1};
          assign qtjgxxnhd = 'b10x;
        endmodule: xen

        module frxmmsmuij
          (output logic [3:4] prmyf, input integer llvrlzdvv, input wire ezesnh);
          
          logic rywnjsg [1:4];
          uwire cvzn [4:0];
          
          xor pojahneyg(gnkyfiqf, vybiwu, prmyf);
          // warning: implicit conversion of port connection truncates from 2 to 1 bits
          //   logic [3:4] prmyf -> logic prmyf
          
          xen r(.ffokjy(cvzn), .qtjgxxnhd(prmyf), .ykjtxamk(mquwxsnpy), .mcobdgrcf(rywnjsg));
          // warning: implicit conversion of port connection truncates from 3 to 2 bits
          //   logic [0:0][2:4] qtjgxxnhd -> logic [3:4] prmyf
          //
          // warning: implicit conversion of port connection expands from 1 to 2 bits
          // warning: implicit conversion changes possible bit states from 4-state to 2-state
          //   wire mquwxsnpy -> bit [4:3] ykjtxamk
          
          
          // Top inputs -> top outputs assigns
          
          // Assigns
          assign mquwxsnpy = 'b10;
          assign rywnjsg = '{'bz,'bz,'bx,'b1};
          assign vybiwu = 'bz;
        endmodule: frxmmsmuij


        // Seed after: 8890095644694070872,14865787408525461641
