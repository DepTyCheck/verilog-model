stage: syntesis
tool: verilator
id: not_an_unpacked_array_but_in_unpacked_array_context
title: Not an unpacked array but in unpacked array context
examples:
  - const_not_an_unpacked_array_but_in_unpacked_array_context:
      first_found: 01.06.2025
      full_error: |
        %Error: top.sv:14:46: CONST '24'h0' is not an unpacked array, but is in an unpacked array context
        14 | (output supply0 logic [4:4][1:4][4:2][1:0] cdsdbfz [0:1], input reg [3:3] ndh, input shortreal enysa);

        %Error: top.sv:41:36: CONST '6'h0' is not an unpacked array, but is in an unpacked array context
        41 | (output supply0 logic [0:1][2:4] l [3:3], output logic [3:0] zpabkp, output byte oiu);
      full_example: |
        // Seed: 7395972068897804450,5268399088297407135

        module suyy
          (input wire logic [1:2][2:4][2:2] efekoqbi [4:3][1:1]);

        // Top inputs -> top outputs assigns

        // Assigns

        endmodule: suyy

        module szivyu
          (output supply0 logic [4:4][1:4][4:2][1:0] cdsdbfz [0:1], input reg [3:3] ndh, input shortreal enysa);

          wire logic [1:2][2:4][2:2] idubqtvboq [4:3][1:1];

          and dtu(edovuhv, cvpoim, eeohiucef);

          suyy nzgmo(.efekoqbi(idubqtvboq));

          nand rhqt(br, edovuhv, br);

          // Top inputs -> top outputs assigns

          // Assigns

        endmodule: szivyu


        module youiuikhn
          (output logic [3:4][4:2] ez [2:3], output wand logic [4:2][1:0] cu [1:4], output triand logic [4:2][4:2] vx);

        // Top inputs -> top outputs assigns

        // Assigns

        endmodule: youiuikhn


        module x
          (output supply0 logic [0:1][2:4] l [3:3], output logic [3:0] zpabkp, output byte oiu);

          wire logic [1:2][2:4][2:2] ugiu [4:3][1:1];

          xor b(gkzgvix, yydhoqxj, tm);

          suyy j(.efekoqbi(ugiu));
          // warning: implicit conversion of port connection expands from 1 to 6 bits
          // wire logic ugiu -> wire logic [1:2][2:4][2:2] efekoqbi [4:3][1:1]

          xor yvya(zpabkp, epybp, ewghtvjxu);
          // warning: implicit conversion of port connection truncates from 6 to 1 bits
          // wire logic [1:2][2:4][2:2] epybp [4:3][1:1] -> logic epybp

          not epa(oiu, weatygjijf);

          // Top inputs -> top outputs assigns

          // Assigns

        endmodule: x

        // Seed after: 6076561090930407099,5268399088297407135
  - varref_not_an_unpacked_array_but_in_unpacked_array_context:
      first_found: 01.06.2025
      full_error: |
        %Error: top.sv:41:38: VARREF 'wup__en2' is not an unpacked array, but is in an unpacked array context
          41 | , input tri1 logic [0:3][2:0][2:3] wup [0:2][3:3][1:4]
      full_example: |
        module gsha
          (input logic [0:3][4:4] cqfmkxy, input reg [2:2][3:0][4:1][2:0] tuandlau);

          or nxoixb(fedewp, fedewp, tuandlau);
          // warning: implicit conversion of port connection truncates from 48 to 1 bits
          // reg [2:2][3:0][4:1][2:0] fedewp -> logic fedewp

          // Top inputs -> top outputs assigns

          // Assigns

        endmodule: gsha

        module drzpuza
          ( output logic [2:4][1:4][1:4][1:1] i
          , output uwire logic [1:2][0:3] gpskj
          , output uwire logic [1:2][1:1][0:4][2:1] lokzl [0:0]
          , input time imijbzrb [2:2]
          , input real emtzmqiiq
          , input logic [0:0][0:2] uzxwa
          , input logic [1:0][0:0][1:4] yepbbdeuls
          );

          or jfnbnuewmr(vjcpmamhq, uzxwa, mwxbotd);
          // warning: implicit conversion of port connection truncates from 3 to 1 bits
          // logic [0:0][0:2] mwxbotd -> logic mwxbotd

          // Top inputs -> top outputs assigns

          // Assigns

        endmodule: drzpuza

        module tovn
          ( output tri0 logic [0:4] hsxniwmvoq [1:2][4:1]
          , output tri0 logic ujyq [3:2][3:0][3:2][3:3]
          , input tri1 logic [0:3][2:0][2:3] wup [0:2][3:3][1:4]
          , input wand logic [2:4][2:3][2:2][1:4] dbbalmko [2:3][1:0][2:1][0:2]
          );

          not darbmui(ncjazspd, ncjazspd);

          // Top inputs -> top outputs assigns

          // Assigns

        endmodule: tovn
